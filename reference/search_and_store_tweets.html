<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Retrieve and store all Tweets for a given full archive search query — search_and_store_tweets • twittrcademic</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Retrieve and store all Tweets for a given full archive search query — search_and_store_tweets" />
<meta property="og:description" content="search_and_store_tweets allows to execute long-running Tweet searches
against the
/2/tweets/search/all
endpoint in the Twitter Academic Research product track
Twitter
Academic Research product track and store the results as batches of files
containing the original JSON responses." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">twittrcademic</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/sdaume/twittrcademic/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Retrieve and store all Tweets for a given full archive search query</h1>
    <small class="dont-index">Source: <a href='https://github.com/sdaume/twittrcademic/blob/master/R/search-tweets.R'><code>R/search-tweets.R</code></a></small>
    <div class="hidden name"><code>search_and_store_tweets.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>search_and_store_tweets</code> allows to execute long-running Tweet searches
against the
<a href='https://developer.twitter.com/en/docs/twitter-api/tweets/search/api-reference/get-tweets-search-all'>/2/tweets/search/all</a>
endpoint in the Twitter Academic Research product track
<a href='https://developer.twitter.com/en/solutions/academic-research'>Twitter
Academic Research product track</a> and store the results as batches of files
containing the original JSON responses.</p>
    </div>

    <pre class="usage"><span class='fu'>search_and_store_tweets</span><span class='op'>(</span><span class='va'>queryString</span>, fromDate <span class='op'>=</span> <span class='cn'>NULL</span>, toDate <span class='op'>=</span> <span class='cn'>NULL</span>,
  batchBaseLabel <span class='op'>=</span> <span class='cn'>NULL</span>, maxBatchSize <span class='op'>=</span> <span class='fl'>10000</span>,
  twitterBearerToken <span class='op'>=</span> <span class='cn'>NULL</span>, verbose <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>queryString</th>
      <td><p>a character string specifying a value for the Tweet search
query parameter (e.g. <em>"sustainability (climate change)"</em>,
<em>"from:stefandaume"</em> etc). See
<a href='https://developer.twitter.com/en/docs/twitter-api/tweets/search/api-reference/get-tweets-search-all'>here</a>
for details. Maximum of 1024 characters.</p></td>
    </tr>
    <tr>
      <th>fromDate</th>
      <td><p>a character string of format ("YYYY-MM-DD") specifying the
date for the oldest Tweets to be included in the search results
(interpreted as inclusive); corresponds to the <code>start_time</code> parameter
of the
<a href='https://developer.twitter.com/en/docs/twitter-api/tweets/search/api-reference/get-tweets-search-all'>/2/tweets/search/all</a>
endpoint. Must NOT be a date before "2006-03-21". If no value is supplied
(default), it is interpreted as the 30th day before <code>toDate</code>.</p></td>
    </tr>
    <tr>
      <th>toDate</th>
      <td><p>a character string of format ("YYYY-MM-DD") specifying the date
for the most recent Tweets to be included in the search results
(interpreted as inclusive); corresponds to the <code>end_time</code> parameter of
the
<a href='https://developer.twitter.com/en/docs/twitter-api/tweets/search/api-reference/get-tweets-search-all'>/2/tweets/search/all</a>
endpoint. If no value is supplied (default), it is interpreted as the
current date.</p></td>
    </tr>
    <tr>
      <th>batchBaseLabel</th>
      <td><p>a character string used to name the stored Tweet search
batch files.</p></td>
    </tr>
    <tr>
      <th>maxBatchSize</th>
      <td><p>an integer specifying the approximate number of Tweets in
each stored batch of Tweet search responses. This number serves as a
threshold, once more Tweets than <code>maxBatchSize</code> are accumulated, they
are stored as a batch.</p></td>
    </tr>
    <tr>
      <th>twitterBearerToken</th>
      <td><p>a character string specifying a valid bearer token
for the
<a href='https://developer.twitter.com/en/solutions/academic-research'>Twitter
Academic Research product track</a> (see <code><a href='oauth_twitter_token.html'>oauth_twitter_token()</a></code>).</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>a boolean indicating whether more detailed intermediate
progress messages should be printed to the console; if <em>FALSE</em> only a
progress bar based on the specified or implied date range and the date of
the latest retrieved Tweet will be printed</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Based on a given Tweet search query and (optional) date range this function
iteratively retrieves all matching Tweets and stores the results in batches
as appropriately labelled JSON files; the complete set of results is split in
batches containing the (approximate) number of Tweets specified by
<code>maxBatchSize</code> Tweets.</p>
<p>The calls to the search API endpoint are timed such that the API call limit
of at most one call per second and 300 calls per 15 minute window is
observed; this corresponds to a maximum of 150.000 Tweets that can be
retrieved every 15 minutes (each individual API call returns at most 500
Tweets).</p>
<p>When running a query a progress bar in the console indicates how quickly data
collection is advancing; progress is shown in relation to the (explicitly or
implicitly) specified search time range and dates of the Tweets in the
retrieved Tweet batches.</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://github.com/sdaume'>Stefan Daume</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


